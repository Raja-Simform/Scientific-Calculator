<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: memoryClass.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: memoryClass.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class memoryClass
 * @description Manages calculator memory operations
 */
import { 
  MEMORY_STORAGE_KEY, 
  MEMORY_BTN_SELECTOR, 
  BTN_MC, 
  BTN_MR, 
  BTN_MPLUS, 
  BTN_MMINUS, 
  BTN_MS, 
  DISABLED_CLASS, 
  ERROR_MESSAGE 
} from './constants.js';
class memoryClass {
  /**
   * @constructor
   * @param {Object} calci - Calculator instance 
   */
  constructor(calci) {
    this.calci = calci;
    this.memory = null;

    this.getMemory = this.getMemory.bind(this);
    this.setMemory = this.setMemory.bind(this);
    this.updateMemoryButtons = this.updateMemoryButtons.bind(this);
    this.memoryhandler = this.memoryhandler.bind(this);

    this.getMemory();
    this.updateMemoryButtons();

    document
      .querySelector(MEMORY_BTN_SELECTOR)
      .addEventListener("click", this.memoryhandler);
  }

  /**
   * @method getMemory
   * @description Retrieves memory value from local storage
   * @returns {void}
   */
  getMemory() {
    const savedMemory = localStorage.getItem(MEMORY_STORAGE_KEY);
    this.memory = savedMemory ? parseFloat(savedMemory) : null;
  }

  /**
   * @method setMemory
   * @description Saves current memory value to local storage
   * @returns {void}
   */
  setMemory() {
    if (this.memory !== null) {
      localStorage.setItem(MEMORY_STORAGE_KEY, this.memory.toString());
    } else {
      localStorage.removeItem(MEMORY_STORAGE_KEY);
    }
  }

  /**
   * @method updateMemoryButtons
   * @description Updates the state of memory-related buttons
   * @returns {void}
   */
  updateMemoryButtons() {
    const hasMemory = this.memory !== null;
    const mcButton = document.querySelector(`[value="${BTN_MC}"]`);
    const mrButton = document.querySelector(`[value="${BTN_MR}"]`);

    if (mcButton) {
      mcButton.disabled = !hasMemory;
      mcButton.classList.toggle(DISABLED_CLASS, !hasMemory);
    }
    if (mrButton) {
      mrButton.disabled = !hasMemory;
      mrButton.classList.toggle(DISABLED_CLASS, !hasMemory);
    }
  }

  /**
   * @method memoryhandler
   * @description Event handler for memory operation button clicks
   * @param {Event} e - Click event object
   * @returns {void}
   */
  memoryhandler(e) {
    const button = e.target.closest("button");
    if (!button || button.disabled) return;

    const action = button.textContent.trim();
    let currentValue = 0;

    try {
      if (this.calci.evalstr &amp;&amp; this.calci.evalstr !== ERROR_MESSAGE) {
        currentValue = parseFloat(eval(this.calci.evalstr));
      }
    } catch (error) {
      return;
    }

    switch (action) {
      case BTN_MC:
        this.memory = null;
        break;
      case BTN_MR:
        if (this.memory !== null) {
          this.calci.evalstr = this.memory.toString();
          this.calci.resultstr = this.calci.evalstr;
        }
        break;
      case BTN_MPLUS:
        if (this.memory === null) {
          this.memory = currentValue;
        } else {
          this.memory += currentValue;
        }
        break;
      case BTN_MMINUS:
        if (this.memory === null) {
          this.memory = -currentValue;
        } else {
          this.memory -= currentValue;
        }
        break;
      case BTN_MS:
        this.memory = currentValue;
        break;
    }

    this.setMemory();
    this.updateMemoryButtons();
    this.calci.renderDisplay();
  }
}

export default memoryClass;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-DropdownController.html">DropdownController</a></li><li><a href="module-ScientificCalculator.html">ScientificCalculator</a></li></ul><h3>Classes</h3><ul><li><a href="Core.html">Core</a></li><li><a href="Display.html">Display</a></li><li><a href="InputHandler.html">InputHandler</a></li><li><a href="MathOperations.html">MathOperations</a></li><li><a href="Mode.html">Mode</a></li><li><a href="history.html">history</a></li><li><a href="memoryClass.html">memoryClass</a></li><li><a href="module-ScientificCalculator-ScientificCalculator.html">ScientificCalculator</a></li></ul><h3>Global</h3><ul><li><a href="global.html#abs">abs</a></li><li><a href="global.html#ceil">ceil</a></li><li><a href="global.html#changeMode">changeMode</a></li><li><a href="global.html#cos">cos</a></li><li><a href="global.html#degbtnHandler">degbtnHandler</a></li><li><a href="global.html#degree">degree</a></li><li><a href="global.html#expi">expi</a></li><li><a href="global.html#exponent">exponent</a></li><li><a href="global.html#factorial">factorial</a></li><li><a href="global.html#factorialHandler">factorialHandler</a></li><li><a href="global.html#floor">floor</a></li><li><a href="global.html#getMemory">getMemory</a></li><li><a href="global.html#initEventListeners">initEventListeners</a></li><li><a href="global.html#inverse">inverse</a></li><li><a href="global.html#ln">ln</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#memoryhandler">memoryhandler</a></li><li><a href="global.html#pi">pi</a></li><li><a href="global.html#setMemory">setMemory</a></li><li><a href="global.html#signChange">signChange</a></li><li><a href="global.html#sin">sin</a></li><li><a href="global.html#square">square</a></li><li><a href="global.html#squareroot">squareroot</a></li><li><a href="global.html#tan">tan</a></li><li><a href="global.html#tenx">tenx</a></li><li><a href="global.html#updateMemoryButtons">updateMemoryButtons</a></li><li><a href="global.html#xy">xy</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Mar 19 2025 11:04:28 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
